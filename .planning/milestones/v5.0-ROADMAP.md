# Milestone v5.0: Learner Progression

**Status:** In progress
**Phases:** 44-47
**Started:** 2026-02-18

## Overview

Completes learner LP progression tracking end-to-end. AJAX handlers already exist as template code but are not registered or integrated — Phase 44 wires them in. Class UI gets collision warnings and progression context. Admin panel delivers full operational control. Reporting delivers the WEC-165 timeline dashboard. Regulatory export closes the Umalusi/DHET compliance loop.

## Phases

- [ ] **Phase 44: AJAX Wiring + Class Integration** - Register the three AJAX handlers, fix namespaces, wire class UI for progression context
- [ ] **Phase 45: Admin Management** - Full `[wecoza_progression_admin]` shortcode with filterable table, bulk actions, audit trail, hold/resume
- [ ] **Phase 46: Learner Progression Report** - `[wecoza_learner_progression_report]` with individual timelines, multi-learner grouped view, Phoenix summary cards
- [ ] **Phase 47: Regulatory Export** - Monthly progressions report with date-range filter and CSV export for compliance

## Phase Details

### Phase 44: AJAX Wiring + Class Integration
**Goal**: The existing progression UI works end-to-end — mark-complete, portfolio upload, and data fetch all fire correctly, and class forms show progression context
**Depends on**: Nothing (fixes broken existing functionality)
**Requirements**: AJAX-01, AJAX-02, AJAX-03, AJAX-04, CLASS-01, CLASS-02, CLASS-03
**Success Criteria** (what must be TRUE):
  1. Admin clicks "Mark Complete" on a learner progression and the status changes to completed with optional portfolio file accepted
  2. Admin uploads an additional portfolio file to an existing in-progress LP and receives a success response
  3. Progression data loads on the learner view without a page reload via the fetch handler
  4. Available Learners table in class capture shows a "Last Completed Course" column populated from progression history
  5. Adding a learner to a class who already has an active LP surfaces a visible collision warning before confirmation
**Plans**: TBD

### Phase 45: Admin Management
**Goal**: Admin can manage all progressions from a single shortcode — filter, bulk-complete, inspect audit trail, start new LPs, and put LPs on hold
**Depends on**: Phase 44
**Requirements**: ADMIN-01, ADMIN-02, ADMIN-03, ADMIN-04, ADMIN-05, ADMIN-06
**Success Criteria** (what must be TRUE):
  1. Admin opens `[wecoza_progression_admin]` and sees a filterable table of all progressions (client, class, LP, status)
  2. Admin selects multiple in-progress progressions, clicks "Bulk Complete", and all selected rows change status
  3. Admin clicks the audit icon on any row and sees the full hours log for that progression
  4. Admin can manually start a new LP for a learner by selecting learner + LP from a form within the page
  5. Admin can toggle a progression to On Hold or resume it, and the status badge reflects the change immediately
**Plans**: TBD

### Phase 46: Learner Progression Report
**Goal**: Admin can search learners, view their LP timeline, filter by employer, and see Phoenix summary cards — satisfying WEC-165
**Depends on**: Phase 44
**Requirements**: RPT-01, RPT-02, RPT-03, RPT-04, RPT-05, RPT-06
**Success Criteria** (what must be TRUE):
  1. Admin searches by learner name or ID and the report filters to matching learners instantly
  2. Admin selects a single learner and sees a chronological timeline of LP, class, and date entries
  3. Admin filters by employer/client company and the report collapses to learners from that company only
  4. Multi-learner view groups learners by company with expandable rows showing individual timelines
  5. Phoenix-styled summary cards above the report show totals, completion rates, and average hours at a glance
**Plans**: TBD

### Phase 47: Regulatory Export
**Goal**: Admin can generate a compliance-ready monthly progressions report with date-range filter and download it as CSV
**Depends on**: Phase 45
**Requirements**: REG-01, REG-02, REG-03, REG-04
**Success Criteria** (what must be TRUE):
  1. Admin selects a date range and generates a monthly progressions report showing learner, LP, class, client, dates, and hours
  2. Admin clicks "Export CSV" and a correctly structured CSV file downloads with all report columns
  3. The exported data includes all fields required for Umalusi/DHET submission without manual post-processing
**Plans**: TBD

## Progress

| Phase | Milestone | Plans | Status | Completed |
|-------|-----------|-------|--------|-----------|
| 44. AJAX Wiring + Class Integration | v5.0 | TBD | Not started | - |
| 45. Admin Management | v5.0 | TBD | Not started | - |
| 46. Learner Progression Report | v5.0 | TBD | Not started | - |
| 47. Regulatory Export | v5.0 | TBD | Not started | - |
