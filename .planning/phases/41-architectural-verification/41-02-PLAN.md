---
phase: 41-architectural-verification
plan: 02
type: execute
wave: 2
depends_on: ["41-01"]
files_modified:
  - .planning/phases/41-architectural-verification/41-02-SUMMARY.md
autonomous: false

must_haves:
  truths:
    - "WordPress debug log has zero new PHP warnings/notices from plugin code"
    - "All shortcodes render HTML without fatal errors"
    - "Agent addresses are accessible via both old columns and locations table"
    - "All verification gaps from Plan 01 are assessed and documented"
  artifacts:
    - path: ".planning/phases/41-architectural-verification/41-02-SUMMARY.md"
      provides: "Final verification report with integration test results"
  key_links:
    - from: "wp-content/debug.log"
      to: "wecoza-core plugin"
      via: "WordPress error logging"
      pattern: "PHP Warning|PHP Notice|PHP Fatal"
---

<objective>
Perform integration-level verification: check WordPress debug log for regressions, verify shortcodes render correctly, and confirm address migration integrity. Address any gaps identified in Plan 01.

Purpose: Ensure the architectural refactoring introduced zero regressions in the live WordPress environment.
Output: Final verification report confirming v4.0 milestone readiness.
</objective>

<execution_context>
@/home/laudes/.claude/get-shit-done/workflows/execute-plan.md
@/home/laudes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/41-architectural-verification/41-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Check WordPress debug log for regressions</name>
  <files>.planning/phases/41-architectural-verification/41-02-SUMMARY.md</files>
  <action>
Read the WordPress debug log at `/opt/lampp/htdocs/wecoza/wp-content/debug.log`.

Search for any PHP warnings, notices, or fatal errors that reference wecoza-core plugin files:
- `wecoza-core` in the file path
- `WeCoza\\` in the error namespace
- Any of the refactored files (Services, Models, Repositories, Controllers)

Focus on RECENT entries (last 24 hours or since the refactoring work on 2026-02-16). Look for:
1. **Fatal errors** -- These would indicate broken functionality
2. **Warnings** -- Type mismatches, undefined methods, missing arguments
3. **Notices** -- Undefined variables, deprecated usage
4. **Deprecation notices** -- PHP 8.x deprecation warnings

Document each finding with:
- Error type (Fatal/Warning/Notice)
- File and line number
- Error message
- Which requirement it relates to (if any)
- Assessment: regression from v4.0 work or pre-existing?

If the debug log is very large, focus on entries from 2026-02-16 onwards.
  </action>
  <verify>Debug log analysis complete. All wecoza-core errors documented with severity assessment.</verify>
  <done>Zero new PHP warnings/notices/fatals from wecoza-core refactored files, OR all findings documented with severity and requirement impact.</done>
</task>

<task type="auto">
  <name>Task 2: Review Plan 01 results and document gap analysis</name>
  <files>.planning/phases/41-architectural-verification/41-02-SUMMARY.md</files>
  <action>
Read the Plan 01 SUMMARY at `.planning/phases/41-architectural-verification/41-01-SUMMARY.md`.

For each requirement that was marked FAIL or MANUAL CHECK REQUIRED:
1. Investigate the specific failure -- read the relevant source files
2. Determine if it's a genuine gap or a false positive in the verification script
3. For genuine gaps: document the specific fix needed and which file(s) to modify
4. For false positives: explain why the check was wrong and what the actual state is
5. For ADDR-05 (data preservation): note this requires user to run migration and verify counts. Document it as a user action item.

Produce a final consolidated report covering:
- Overall PASS/FAIL counts from Plan 01
- Debug log findings from Task 1
- Gap analysis for any failures
- Final v4.0 milestone assessment: READY or NEEDS GAP CLOSURE

If all 28 requirements pass (or have documented justification for acceptable deviations), recommend marking v4.0 as complete.
  </action>
  <verify>Gap analysis covers every non-PASS result from Plan 01. Final assessment is clear and actionable.</verify>
  <done>Consolidated verification report exists with clear v4.0 milestone status. All 28 requirements have a final disposition (PASS, ACCEPTABLE DEVIATION, or NEEDS FIX).</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: User verifies live site has no regressions</name>
  <files>.planning/phases/41-architectural-verification/41-02-SUMMARY.md</files>
  <action>
User manually verifies the live WordPress site works correctly after all v4.0 refactoring.

What was built: Complete architectural verification of v4.0 refactoring -- 28 requirements checked via automated script + debug log analysis + gap review.

How to verify:
1. Review the verification report in the SUMMARY.md
2. Visit the WordPress site and confirm:
   a. Navigate to a page with learner management -- does it load without errors?
   b. Navigate to a page with agent management -- does it load without errors?
   c. Navigate to a page with client management -- does it load without errors?
   d. Navigate to a page with class management -- does it load without errors?
3. If ADDR-05 was flagged as manual: verify agent addresses appear correctly on agent detail pages
4. Check debug.log after browsing -- any new errors?

Resume signal: Type "approved" if all pages load correctly and no regressions visible, or describe any issues found.
  </action>
  <verify>User confirms all module pages load without errors and no new debug log entries appear.</verify>
  <done>User has approved the verification -- all module pages load correctly, no visible regressions, debug log clean.</done>
</task>

</tasks>

<verification>
1. WordPress debug log reviewed for wecoza-core regressions
2. All Plan 01 FAIL/MANUAL results investigated and documented
3. Final v4.0 milestone assessment produced
4. User confirms live site works correctly (checkpoint)
</verification>

<success_criteria>
- Zero new PHP errors in debug log from refactored files
- All 28 requirements have final disposition
- User confirms all module pages load without errors
- v4.0 milestone status is definitively READY or NEEDS GAP CLOSURE with specific items
</success_criteria>

<output>
After completion, create `.planning/phases/41-architectural-verification/41-02-SUMMARY.md`
</output>
