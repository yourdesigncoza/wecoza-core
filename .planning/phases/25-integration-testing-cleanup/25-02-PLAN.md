---
phase: 25-integration-testing-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["25-01"]
files_modified:
  - .integrate/done/wecoza-clients-plugin/  # removal
autonomous: true

must_haves:
  truths:
    - "No code in wecoza-core references .integrate/ paths, WeCozaClients namespace, or WECOZA_CLIENTS_ constants"
    - ".integrate/done/wecoza-clients-plugin/ folder removed from repository"
    - "Integrated Clients module still functions after cleanup"
  artifacts:
    - path: ".integrate/done/"
      provides: "Empty done directory (wecoza-clients-plugin removed)"
  key_links:
    - from: "src/Clients/"
      to: "wecoza-core.php"
      via: "PSR-4 autoloading and controller instantiation"
      pattern: "WeCoza\\\\Clients"
---

<objective>
Remove archived standalone wecoza-clients-plugin from `.integrate/done/` directory and verify no dangling references exist in the codebase.

Purpose: Satisfies CLN-02 requirement -- `.integrate/wecoza-clients-plugin/` folder removed from repository. Establishes single source of truth in `src/Clients/`.
Output: Clean repository with no standalone plugin artifacts.
</objective>

<execution_context>
@/home/laudes/.claude/get-shit-done/workflows/execute-plan.md
@/home/laudes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-integration-testing-cleanup/25-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify no dangling references and remove .integrate/done/wecoza-clients-plugin</name>
  <files>.integrate/done/wecoza-clients-plugin/</files>
  <action>
**Step 1: Pre-removal verification scans**

Run these checks to confirm no code depends on the archived standalone plugin:

1. Search entire `src/` for `WeCozaClients` namespace references:
   `grep -r "WeCozaClients" src/ views/ assets/ --include="*.php" --include="*.js"`
   Expected: No matches.

2. Search for `WECOZA_CLIENTS_` constants:
   `grep -r "WECOZA_CLIENTS_" src/ views/ assets/ config/ --include="*.php" --include="*.js"`
   Expected: No matches.

3. Search for `.integrate/` path references:
   `grep -r "\.integrate/" src/ views/ assets/ config/ --include="*.php" --include="*.js"`
   Expected: No matches.

4. Search for `wecoza-clients-plugin` string in active code:
   `grep -r "wecoza-clients-plugin" src/ views/ assets/ config/ wecoza-core.php composer.json --include="*.php" --include="*.js" --include="*.json"`
   Expected: No matches.

5. Verify `.integrate/wecoza-agents-plugin/` is NOT being removed (only done/wecoza-clients-plugin):
   Confirm `.integrate/wecoza-agents-plugin/` still exists and is untouched.

**Step 2: Remove archived standalone plugin**

If ALL checks pass (no references found):
- Remove `.integrate/done/wecoza-clients-plugin/` directory entirely: `rm -rf .integrate/done/wecoza-clients-plugin/`
- If `.integrate/done/` is now empty, remove it too: `rmdir .integrate/done/ 2>/dev/null` (only if empty)

**Step 3: Post-removal smoke test**

Run the feature parity test to confirm nothing broke:
`cd /opt/lampp/htdocs/wecoza && php wp-content/plugins/wecoza-core/tests/integration/clients-feature-parity.php`
All tests must still pass.

If any pre-removal check finds references, DO NOT remove the folder. Instead document the references found and what needs to be fixed.
  </action>
  <verify>
1. `.integrate/done/wecoza-clients-plugin/` no longer exists: `ls .integrate/done/wecoza-clients-plugin/ 2>&1` should show "No such file or directory"
2. `.integrate/wecoza-agents-plugin/` still exists: `ls .integrate/wecoza-agents-plugin/ 2>&1` should show contents
3. Feature parity test still passes: `cd /opt/lampp/htdocs/wecoza && php wp-content/plugins/wecoza-core/tests/integration/clients-feature-parity.php` exits with code 0
  </verify>
  <done>Archived standalone plugin removed from repository. No dangling references. Integrated module still fully functional. `.integrate/wecoza-agents-plugin/` preserved for future integration.</done>
</task>

<task type="auto">
  <name>Task 2: Update .gitignore and verify final repository state</name>
  <files>.gitignore</files>
  <action>
**Step 1: Check .gitignore for any .integrate-related entries**

Read `.gitignore` and check if there are any entries related to `.integrate/done/wecoza-clients-plugin/` that should be cleaned up or updated. If there are entries specifically ignoring the removed directory, remove those entries. Leave entries for `.integrate/wecoza-agents-plugin/` if they exist.

**Step 2: Verify repository cleanliness**

Run `git status` to confirm:
- `.integrate/done/wecoza-clients-plugin/` appears as deleted (tracked files removed)
- No unexpected untracked files introduced
- `.integrate/wecoza-agents-plugin/` is unaffected

**Step 3: Final integration checklist log**

Verify these truths hold simultaneously:
1. `src/Clients/` directory exists with all module files (Ajax, Controllers, Helpers, Models, Repositories)
2. `views/clients/` directory exists with all view templates
3. `wecoza-core.php` references `WeCoza\Clients\` namespace (autoloading + initialization)
4. Feature parity test passes
5. `.integrate/done/wecoza-clients-plugin/` removed
6. No dangling references in codebase
  </action>
  <verify>
1. `git status` shows clean removal of `.integrate/done/wecoza-clients-plugin/` files
2. No unexpected changes to `.integrate/wecoza-agents-plugin/`
3. Feature parity test at `tests/integration/clients-feature-parity.php` still passes
  </verify>
  <done>.gitignore cleaned if needed, repository state verified clean, all Phase 25 success criteria confirmed.</done>
</task>

</tasks>

<verification>
- `.integrate/done/wecoza-clients-plugin/` directory no longer exists
- `.integrate/wecoza-agents-plugin/` directory still exists and is unchanged
- No code references to `WeCozaClients`, `WECOZA_CLIENTS_`, `.integrate/`, or `wecoza-clients-plugin` in active code
- Feature parity test still passes after removal
- `git status` shows clean state
</verification>

<success_criteria>
- CLN-02 satisfied: `.integrate/wecoza-clients-plugin/` folder removed from repository
- Repository has single source of truth for Clients module in `src/Clients/`
- No dangling references to standalone plugin anywhere in active code
- Feature parity test confirms continued functionality post-cleanup
</success_criteria>

<output>
After completion, create `.planning/phases/25-integration-testing-cleanup/25-02-SUMMARY.md`
</output>
